

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Runtime setup &mdash; Anbox  documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Bug reporting" href="../contribute/bug_report.html" />
    <link rel="prev" title="Software Rendering" href="../userguide/advanced/software_rendering.html" /> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Anbox
          

          
            
            <img src="../_static/logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../userguide/install.html">Install Anbox</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../userguide/install.html#install-the-anbox-snap">Install the Anbox snap</a></li>
<li class="toctree-l2"><a class="reference internal" href="../userguide/install.html#available-snap-channels">Available snap channels</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../userguide/install.html#uninstall-anbox">Uninstall Anbox</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userguide/install_kernel_modules.html">Install Kernel Modules</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../userguide/install_kernel_modules.html#install-with-dkms">Install with DKMS</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../userguide/install_kernel_modules.html#install-dkms-package-from-ppa">Install DKMS package from PPA</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../userguide/install_kernel_modules.html#install-with-in-tree-modules">Install with in-tree modules</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../userguide/install_apps.html">Install applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userguide/advanced/index.html">Advanced use</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../userguide/advanced/rootfs_overlay.html">Android rootfs overlay</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../userguide/advanced/rootfs_overlay.html#enable-android-rootfs-overlay">Enable Android rootfs overlay</a></li>
<li class="toctree-l3"><a class="reference internal" href="../userguide/advanced/rootfs_overlay.html#extend-android-rootfs-with-additional-files">Extend Android rootfs with additional files</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../userguide/advanced/software_rendering.html">Software Rendering</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Architecture</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Runtime setup</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#application-mapping">Application Mapping</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Contribute</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../contribute/bug_report.html">Bug reporting</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../contribute/bug_report.html#check-if-the-bug-is-already-reported">Check if the bug is already reported</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contribute/bug_report.html#update-to-the-latest-version-of-anbox">Update to the latest version of Anbox</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contribute/bug_report.html#collect-all-necessary-information-for-the-bug-report">Collect all necessary information for the bug report</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contribute/bug_report.html#create-the-bug-report">Create the bug report</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Community</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../community/channels.html">Channels</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../community/channels.html#irc">IRC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../community/channels.html#telegram">Telegram</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Anbox</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Runtime setup</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/architecture/runtime_setup.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="runtime-setup">
<h1>Runtime setup<a class="headerlink" href="#runtime-setup" title="Permalink to this headline">¶</a></h1>
<p>The Anbox runtime consists mainly of two separate instances:</p>
<blockquote>
<div><ul class="simple">
<li>container manager</li>
<li>session manager</li>
</ul>
</div></blockquote>
<p>The container manager has the job of managing the container setup and maintenance
during its lifetime. It has the responsibility to start the LXC environment we’re
using to run the Android system.</p>
<p>The session manager runs inside the session of a user logged into the Linux system.
It will communicate over several sockets with the Android instance running inside
the container and provide integration with the Linux system. It also acts as a
multiplexer to map Android applications into single windows on the desktop
environment. Currently all application windows are owned by the same process
(the session manager). The application logic itself is still in a separate process
inside the Android container.</p>
<p>The following picture shows an overview over the architecture:</p>
<img alt="../_images/architecture.png" src="../_images/architecture.png" />
<div class="section" id="application-mapping">
<h2>Application Mapping<a class="headerlink" href="#application-mapping" title="Permalink to this headline">¶</a></h2>
<p>Android applications are mapped into single windows within the desktop environment.
This is achieved by plugging into the Android hwcomposer HAL module which receives
a set of layers to composite on a screen. Anbox tells SurfaceFlinger through its
hwcomposer implementation to get a layer for each application and combines this with
additional information it receives from the Android WindowManager to map individual
layers to applications. For more details please look into the implementation at</p>
<blockquote>
<div><ul class="simple">
<li>android/hwcomposer</li>
<li>src/anbox/graphics/layer_composer.cpp</li>
<li>src/anbox/wm/manager.cpp</li>
</ul>
</div></blockquote>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../contribute/bug_report.html" class="btn btn-neutral float-right" title="Bug reporting" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../userguide/advanced/software_rendering.html" class="btn btn-neutral" title="Software Rendering" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Anbox Team.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  <script type="text/javascript" src="../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>